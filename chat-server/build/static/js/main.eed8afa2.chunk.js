(this["webpackJsonpchat-client"]=this["webpackJsonpchat-client"]||[]).push([[0],{129:function(e,t){},132:function(e,t,a){},133:function(e,t,a){},138:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(8),s=a.n(r),o=(a(99),a(18)),l=a(44),i=a.n(l),m=a(10),u=a(78),d=a.n(u),b=a(185),E=a(187),p=(a(132),a(144)),f=a(25),v=a(186),O=a(178),j=(a(133),Object(n.createContext)()),g={server:{onSuccessEnter:"successEnter",onUpdateRoomUsers:"liveRoomUsers",onUserMessage:"broadcastChatMessage",onServerMessage:"serverMessage"},client:{onUserSendName:"sendName",onUserSendMessage:"sendChatMessage"}},h=Object(n.memo)((function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(m.e)(),l=Object(n.useContext)(j);return c.a.createElement(p.a,{className:"WelcomePage_paper"},c.a.createElement(f.a,{variant:"subtitle1",color:"primary",component:"h1"},"My chat server"),c.a.createElement(v.a,{id:"username",label:a?"Name":"Enter your name",value:a,onChange:function(e){r(e.target.value)},className:"WelcomePage_field"}),c.a.createElement(O.a,{variant:"outlined",color:"primary",disabled:!a,onClick:function(){l.emit(g.client.onUserSendName,{name:a,room:s.pathname.slice(1)})}},"Join chat"))})),S=(a(138),a(83)),x=(a(139),a(180)),M=a(181),y=a(179),N=function(e){return new Date(e).toLocaleTimeString("en-US")},U=(a(140),Object(n.memo)((function(e){var t=e.message,a=e.isOwn;return c.a.createElement(y.a,{className:i()("MessageBox","MessageBox__owner-".concat(a?"me":"other")),key:t.timestamp+t.sender,variant:"outlined"},c.a.createElement(x.a,{title:c.a.createElement(f.a,{variant:"subtitle1",color:"primary"},t.sender),subheader:c.a.createElement(f.a,{variant:"subtitle2",color:"textSecondary"},N(t.timestamp))}),c.a.createElement(M.a,null,c.a.createElement(f.a,null,t.text)))}))),C=a(48),w=a(84),k=a(82),_=function e(t){Object(C.a)(this,e),this.text=t},W=function(e){Object(w.a)(a,e);var t=Object(k.a)(a);function a(e,n,c,r){var s;return Object(C.a)(this,a),(s=t.call(this,c)).timestamp=e,s.sender=n,s.id=r,s}return a}(_),B=Object(n.memo)((function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useContext)(j);function l(e){console.log(e);var t=new W(e.timestamp,e.sender,e.text,e.id);r([].concat(Object(S.a)(a),[t]))}return s.on(g.server.onUserMessage,l),s.on(g.server.onServerMessage,l),c.a.createElement(p.a,{className:"MessageWindow"},a.map((function(e){return c.a.createElement(U,{key:e.timestamp,message:e,isOwn:e.id===s.id})})))})),A=(a(141),Object(n.memo)((function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useContext)(j);return c.a.createElement(p.a,{className:"MessageBoxInput"},c.a.createElement(v.a,{placeholder:"Enter your message",value:a,onChange:function(e){r(e.target.value)},className:"MessageBoxInput_field"}),c.a.createElement(O.a,{onClick:function(){s&&(s.emit(g.client.onUserSendMessage,new _(a)),r(""))},variant:"outlined",color:"primary",disabled:!a},"Send"))}))),L=a(184),P=(a(142),a(177)),I=a(182),J=a(183),R=Object(n.memo)((function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],r=t[1];return Object(n.useContext)(j).on(g.server.onUpdateRoomUsers,(function(e){console.log(e),e&&r(e)})),c.a.createElement(p.a,{className:"LiveUserWindow"},c.a.createElement(f.a,{className:"LiveUserWindow-header",variant:"subtitle1",color:"secondary",noWrap:!0},"Live users"),c.a.createElement(P.a,null,a.map((function(e,t){return c.a.createElement(I.a,{key:e},c.a.createElement(J.a,{primary:"".concat(t+1,". ").concat(e)}))}))))})),D=Object(n.memo)((function(){return c.a.createElement(L.a,{container:!0,spacing:3},c.a.createElement(L.a,{className:"ChatPage-header",item:!0,xs:12}),c.a.createElement(L.a,{item:!0,xs:3}),c.a.createElement(L.a,{item:!0,xs:6},c.a.createElement(B,null),c.a.createElement(A,null)),c.a.createElement(L.a,{item:!0,xs:3},c.a.createElement(R,null)))})),F={socket:{uri:"127.0.0.1:3001"}},T=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],r=t[1],s=Object(n.useState)(null),l=Object(o.a)(s,2),u=l[0],p=l[1],f=Object(m.d)();return Object(n.useEffect)((function(){alert("App mount");var e=d.a.connect(F.socket.uri);return p(e),e.on(g.server.onSuccessEnter,(function(e){f.push("/".concat(e)),r(!0)})),function(){alert("App unmount"),u&&u.disconnect()}}),[f,u]),c.a.createElement(j.Provider,{value:u},c.a.createElement(E.b,{injectFirst:!0},c.a.createElement(b.a,{className:i()("App_container",!a&&"App_container__modal")},a?c.a.createElement(D,null):c.a.createElement(h,null))))},q=a(42);s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(q.a,null,c.a.createElement(T,null))),document.getElementById("root"))},94:function(e,t,a){e.exports=a(143)},99:function(e,t,a){}},[[94,1,2]]]);
//# sourceMappingURL=main.eed8afa2.chunk.js.map